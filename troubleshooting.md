title: 疑难解答
---

在微信公众平台开发的道路上，遍布着各种大大小小的坑，有的人掉坑里，几经折腾又爬出来了，然后拍拍屁股走人。然而坑还在那里，还会继续有后来人掉进去……  
这，是我们不愿看到的。  
所以在这里，我们将陆续将微信开发中可能遇到的各种疑难问题进行汇总，并给出对应的解决办法。一般情况下，这些问题都可以对号入座，轻松地解决。但也不排除特殊情况，这时候你遇到的问题与文中某一个症状一致，但文中所给的解决方案并不凑效，这种情况下就需要发挥你自己的智慧，去……折腾了……  
我们期待这一版块为各位的开发带来便利，同时也希望各位本着开源、分享的精神对其进行补充和完善，将各种坑一一填小、填平，让微信开发变得不那么痛苦，甚至，变成一件快乐的事……


### CA证书问题
在使用SDK调用微信支付等相关的操作时可能会遇到报 “SSL certificate problem: unable to get local issuer certificate” 的错误。  
微信公众平台提供的文档中建议对部分较敏感的操作接口使用 https 协议进行访问，例如微信支付和红包等接口中涉及到操作商户资金的一些操作。  
wecaht sdk 遵循了官方建议，所以在调用这些接口时，除了按照官方文档设置操作证书文件外，还需要保证服务器正确安装了CA证书。  
配置CA证书十分简单。只城下载好有效的CA证书（如果从商户平台下载的证书文件，里面有一个rootca.pem证书可直接使用），然后修改 php.ini 添加如下设置，然后重启服务器即可。注意证书文件路径以自己实际情况为准。
```
curl.cainfo = D:\rootca.pem
```
如果你不介意安全问题，也可以将SDK中Utils\Http类中189行处的 CURLOPT_SSL_VERIFYPEER 选项设置为 false（针对2.1版本）.不过，并不推荐这种解决办法，除了安全方面考虑之外，每次使用composer更新之后，都需要重新修改，十分不便。此外，在使用3.0版本 wechat sdk时，安装CA证书是必须的。
